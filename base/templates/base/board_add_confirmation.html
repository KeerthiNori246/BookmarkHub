{% extends 'main.html' %}

{% block content %}

<div style="max-width: 800px; margin: 40px auto; padding: 20px; font-family: 'Futura', Arial, sans-serif;">

  {% if error %}
    <p style="color: red; font-weight: 500;">{{ error }}</p>
  {% else %}

    {% if message %}
      <h3 style="color: black; font-weight: bold; margin-bottom: 20px;">{{ message }}</h3>
      <a href="{% url 'home' %}" 
         style="display: inline-block; padding: 10px 18px; border: 1px solid #000; border-radius: 4px; background: #f5f5f5; color: black; text-decoration: none; font-weight: 500;">
        â¬… Back
      </a>

    {% elif article_data %}
      <h2 style="font-size: 24px; font-weight: bold; margin-bottom: 20px; border-bottom: 2px solid #ddd; padding-bottom: 8px;">
        Confirm Saving Article to Board
      </h2>
      <p style="margin-bottom: 20px;">You selected board: <strong>{{ board.name }}</strong></p>

      <!-- Article Preview -->
      <div style="border: 1px solid #ddd; border-radius: 6px; padding: 16px; margin-bottom: 20px; display: flex; gap: 16px; align-items: flex-start;">
        {% if article_data.pic %}
          <img src="/media/{{ article_data.pic }}" alt="Article Image" 
               style="width: 120px; height: 100px; object-fit: cover; border-radius: 4px; border: 1px solid #ccc;">
        {% endif %}
        <div style="flex: 1;">
          <h4 style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">{{ article_data.title }}</h4>
          <p style="font-size: 14px; color: #555; margin-bottom: 10px;">{{ article_data.overview }}</p>
          <a href="{{ article_data.link }}" target="_blank" style="font-size: 13px; color: #0073e6; text-decoration: none; word-break: break-all;">
            {{ article_data.link }}
          </a>
        </div>
      </div>

      <!-- Confirmation Form -->
      <form method="POST" style="display: flex; gap: 12px;">
        {% csrf_token %}
        <input type="hidden" name="title" value="{{ article_data.title }}">
        <input type="hidden" name="overview" value="{{ article_data.overview }}">
        <input type="hidden" name="link" value="{{ article_data.link }}">
        <input type="hidden" name="pic" value="{{ article_data.pic }}">

        <button type="submit" name="confirm"
                style="flex: 1; background: black; color: white; padding: 10px 16px; border: none; border-radius: 4px; font-size: 15px; font-weight: 500; cursor: pointer; transition: background 0.2s;">
          Yes, Save to Board
        </button>
        <button type="submit" name="cancel"
                style="flex: 1; background: #f5f5f5; color: black; padding: 10px 16px; border: 1px solid #000; border-radius: 4px; font-size: 15px; font-weight: 500; cursor: pointer; transition: background 0.2s;">
          No, Cancel
        </button>
      </form>

    {% else %}
      <p style="color: #666;">No article data received.</p>
    {% endif %}
  {% endif %}

</div>

{% endblock %}

